import{S as b,i as u,a as F}from"./assets/vendor-89feecc5.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();let n="";const S=document.querySelector(".form"),i=document.querySelector(".gallery");document.querySelector(".loader");const g=document.querySelector(".load_more_btn"),L=document.querySelector(".loader-container"),p=document.querySelector(".preloader"),v=new b(".gallery a",{captionsData:"alt",captionDelay:250,close:!0,enableKeyboard:!0,docClose:!0}),d=e=>{const r=e&&i.children.length>=40;g.style.display=r?"flex":"none"},l=e=>{L.style.display=e?"flex":"none"},m=e=>{if(p.style.display=e?"block":"none",e){const o=document.querySelector('.form input[name="search"]').getBoundingClientRect();p.style.top=`${o.bottom+32}px`}},x=e=>e.reduce((r,o)=>r+`
    <li class="gallery-item">
      <a href="${o.largeImageURL}"> 
        <img class="gallery-img" src="${o.webformatURL}" alt="${o.tags}" />
      </a>
      <div class="gallery-text-box">
        <p>Likes: <span class="text-value">${o.likes}</span></p>
        <p>Views: <span class="text-value">${o.views}</span></p>
        <p>Comments: <span class="text-value">${o.comments}</span></p>
        <p>Downloads: <span class="text-value">${o.downloads}</span></p>
      </div>
    </li>
    `,""),f=async({query:e,page:r,perPage:o})=>{var s;const c="https://pixabay.com/api/?",t="41732338-ca5909782120305119b6393dc";try{m(!0);const a=await F.get(c,{params:{key:t,q:e,page:r,per_page:o,image_type:"photo",orientation:"horizontal",safesearch:!0}});if(a.data.hits.length===0)r===1&&u.error({position:"bottomRight",messageColor:"#FFFFFF",backgroundColor:"#EF4040",titleSize:"8px",closeOnEscape:!0,message:"Sorry, there are no images matching your search query. Please try again!"});else{const h=(s=i.querySelector(".gallery-item"))==null?void 0:s.getBoundingClientRect().height;i.insertAdjacentHTML("beforeend",x(a.data.hits)),v.refresh(),r*o>=a.data.totalHits?(d(!1),u.info({position:"bottomRight",messageColor:"#FFFFFF",backgroundColor:"#3e4f65",titleSize:"8px",closeOnEscape:!0,message:"We're sorry, but you've reached the end of search results."})):d(!0),window.scrollBy({top:h*2,behavior:"smooth"})}}catch{u.error({position:"bottomRight",messageColor:"#FFFFFF",backgroundColor:"#EF4040",titleSize:"8px",closeOnEscape:!0,message:"An error occurred while fetching images. Please try again."})}finally{m(!1),l(!1)}},q=async()=>{const e={query:n,page:Math.ceil(i.children.length/40)+1,perPage:40};l(!0),await f(e)},y=async e=>{e.preventDefault(),l(!0),d(!1);const r=e.target.elements.search;if(n=encodeURIComponent(r.value.trim()),n===""){u.error({position:"bottomRight",messageColor:"#FFFFFF",backgroundColor:"#EF4040",titleSize:"8px",closeOnEscape:!0,message:"Please enter a valid search query."}),l(!1);return}const o={query:n,page:1,perPage:40};i.innerHTML="",await f(o),l(!1),d(!0)};S.addEventListener("submit",y);g.addEventListener("click",q);document.addEventListener("DOMContentLoaded",()=>{const e=n;e&&y({target:{elements:{search:{value:e}}}})});
//# sourceMappingURL=commonHelpers.js.map
