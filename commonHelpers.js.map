{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst input = document.querySelector('.search-input');\nconst form = document.querySelector('.search-form');\nconst ul = document.querySelector('.images-list');\nconst divGallery = document.querySelector('.gallery'); //for spinner\nconst loadMoreBtn = document.querySelector('.load_more_btn');\n\n// Створення нового елементу для завантажувача\nconst loaderElement = document.createElement('span');\nloaderElement.className = 'loader is-hidden';\n\n// Додавання завантажувача до списку\ndivGallery.append(loaderElement);\n\nconst loaderClass = document.querySelector('.loader');\n\nconst KEY = '41487030-c0d4f2e8fae3a5e9414bad560';\n\n// Ініціалізація SimpleLightbox один раз поза обробником подій\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: '250',\n});\n\n// Виклик повідомлення з помилкою\nfunction errorCommit() {\n  iziToast.show({\n    title: '',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: '#FFFFFF',\n    backgroundColor: '#EF4040',\n    color: '#B51B1B',\n    iconUrl: './bi_x-octagon.svg',\n    iconColor: '#FAFAFB',\n    position: 'topRight',\n  });\n}\n\nfunction renderImages(request) {\n  console.log(request);\n  return request.reduce(\n    (html, img) =>\n      html +\n      `\n    <li class=\"images-item\">\n      <a class=\"images-link\" href=\"${img.largeImageURL}\"><img class=\"images\" data-source=\"${img.largeImageURL}\" alt=\"${img.tags}\" src=\"${img.webformatURL}\" width=\"360\" height=\"200\"></a>\n      <div class=\"description\">\n          <div>\n            <p><b>Likes</b></p>\n            <p>${img.likes}</p>\n          </div>\n          <div>\n            <p><b>Views</b></p>\n            <p>${img.views}</p>\n          </div>\n          <div>\n            <p><b>Comments</b></p>\n            <p>${img.comments}</p>\n          </div>\n        <div>\n          <p><b>Downloads</b></p>\n          <p>${img.downloads}</p>\n        </div>\n      </div>\n    </li>\n      `,\n    ''\n  );\n}\n\nasync function fetchImages() {\n  try {\n    const response = await axios.get();\n\n    // Обробка помилки при відсутніх зображеннях\n    if (response.data.hits.length === 0) {\n      errorCommit();\n    } else {\n      input.value = '';\n      // Приховання завантажувача після отримання результатів\n      loaderClass.classList.add('is-hidden');\n      // Рендер зображень\n      ul.innerHTML = renderImages(response.data.hits);\n      // Виклик методу для оновлення галереї\n      lightbox.refresh();\n      // Відображення кнопки Load more\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n    return response;\n  } catch (error) {\n    ul.innerHTML = '';\n    input.value = '';\n    // Приховання завантажувача після отримання результатів\n    loaderClass.classList.add('is-hidden');\n    errorCommit();\n  }\n}\n\nconst listener = event => {\n  event.preventDefault();\n  // Переключення видимості завантажувача\n  loaderClass.classList.remove('is-hidden');\n\n  const query = event.currentTarget.elements.query.value;\n\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  axios.defaults.params = {\n    key: KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  };\n\n  fetchImages();\n};\n\nform.addEventListener('submit', listener);"],"names":["input","form","ul","divGallery","loadMoreBtn","loaderElement","loaderClass","KEY","lightbox","SimpleLightbox","errorCommit","iziToast","renderImages","request","html","img","fetchImages","response","axios","listener","event","query"],"mappings":"owBAYA,MAAMA,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAK,SAAS,cAAc,cAAc,EAC1CC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAc,SAAS,cAAc,gBAAgB,EAGrDC,EAAgB,SAAS,cAAc,MAAM,EACnDA,EAAc,UAAY,mBAG1BF,EAAW,OAAOE,CAAa,EAE/B,MAAMC,EAAc,SAAS,cAAc,SAAS,EAE9CC,EAAM,qCAGNC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,KAChB,CAAC,EAGD,SAASC,GAAc,CACrBC,EAAS,KAAK,CACZ,MAAO,GACP,QACE,2EACF,aAAc,UACd,gBAAiB,UACjB,MAAO,UACP,QAAS,qBACT,UAAW,UACX,SAAU,UACd,CAAG,CACH,CAEA,SAASC,EAAaC,EAAS,CAC7B,eAAQ,IAAIA,CAAO,EACZA,EAAQ,OACb,CAACC,EAAMC,IACLD,EACA;AAAA;AAAA,qCAE+BC,EAAI,mDAAmDA,EAAI,uBAAuBA,EAAI,cAAcA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAI5HA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,iBAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,eAINA,EAAI;AAAA;AAAA;AAAA;AAAA,QAKf,EACJ,CACA,CAEA,eAAeC,GAAc,CAC3B,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,MAG7B,OAAID,EAAS,KAAK,KAAK,SAAW,EAChCP,KAEAV,EAAM,MAAQ,GAEdM,EAAY,UAAU,IAAI,WAAW,EAErCJ,EAAG,UAAYU,EAAaK,EAAS,KAAK,IAAI,EAE9CT,EAAS,QAAO,EAEhBJ,EAAY,UAAU,OAAO,WAAW,GAEnCa,CACR,MAAC,CACAf,EAAG,UAAY,GACfF,EAAM,MAAQ,GAEdM,EAAY,UAAU,IAAI,WAAW,EACrCI,GACD,CACH,CAEA,MAAMS,EAAWC,GAAS,CACxBA,EAAM,eAAc,EAEpBd,EAAY,UAAU,OAAO,WAAW,EAExC,MAAMe,EAAQD,EAAM,cAAc,SAAS,MAAM,MAEjDF,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,OAAS,CACtB,IAAKX,EACL,EAAGc,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,EAEEL,GACF,EAEAf,EAAK,iBAAiB,SAAUkB,CAAQ"}